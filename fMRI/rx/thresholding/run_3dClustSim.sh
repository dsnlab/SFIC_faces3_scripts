#!/bin/bash
#--------------------------------------------------------------
#
#SBATCH --job-name=allAff_age_clustSim
#SBATCH --output=output/allAff_age_clustSim.log
#SBATCH --error=output/allAff_age_clustSim_error.log
#SBATCH --cpus-per-task=25
#SBATCH --ntasks=1
#SBATCH --mem-per-cpu=4000
#SBATCH --partition=fat,short

# This script runs 3dClustSim for each model using acf parameters generated by calculateACF.sh

module unload intel
module load gcc/6.4 
module load afni

# Specify variables
# ------------------------------------------------------------------------------------------

# RX directories (where model masks can be found)
afniDir=/projects/dsnlab/shared/SFIC_Faces3/fMRI/analysis/rx/AFNI_masked/allAff

# Output directory to store thresholding info
outputDir=/projects/dsnlab/shared/SFIC_Faces3/fMRI/analysis/rx/AFNI_masked/thresholding/allAff

# Run 3dClustSim
# ------------------------------------------------------------------------------------------

#3dClustSim -mask "${afniDir}"/age/allAff_age+tlrc[0] -acf 0.487101  4.79048  12.0862 > "${outputDir}"/age.txt

#3dClustSim -mask "${afniDir}"/age_sq/allAff_age_sq+tlrc[0] -acf 0.486456  4.7948  12.023 > "${outputDir}"/age_sq.txt

#3dClustSim -mask "${afniDir}"/test_cub/allAff_test_cub+tlrc[0] -acf 0.479829  4.77772  11.9654 > "${outputDir}"/test_cub.txt

#3dClustSim -mask "${afniDir}"/age_cubF/allAff_age_cub+tlrc[0] -acf 0.486987  4.8344  11.7477 > "${outputDir}"/age_cubF.txt

#3dClustSim -mask "${afniDir}"/age_cubM/allAff_age_cub+tlrc[0] -acf 0.505009  4.71071  12.5593 > "${outputDir}"/age_cubM.txt

#3dClustSim -mask "${afniDir}"/pds_cubF/allAff_pds_cub+tlrc[0] -acf 0.487129  4.82025  11.8325 > "${outputDir}"/pds_cubF.txt

#3dClustSim -mask "${afniDir}"/pds_cubM/allAff_pds_cub+tlrc[0] -acf 0.485049  4.74235  12.1954 > "${outputDir}"/pds_cubM.txt

#3dClustSim -mask "${afniDir}"/test_cubF/allAff_test_cub+tlrc[0] -acf 0.481788  4.79471  11.7627 > "${outputDir}"/test_cubF.txt

#3dClustSim -mask "${afniDir}"/test_cubM/allAff_test_cub+tlrc[0] -acf 0.5023  4.71259  12.422 > "${outputDir}"/test_cubM.txt

3dClustSim -mask "${afniDir}"/pds/allAff_pds+tlrc[0] -acf 0.484799  4.80348  12.0587 > "${outputDir}"/pds.txt

3dClustSim -mask "${afniDir}"/test/allAff_test+tlrc[0] -acf 0.480981  4.78581  11.9982 > "${outputDir}"/test.txt
